<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gothic+A1:wght@100;200;300;400;500;600&family=Nanum+Gothic&display=swap" rel="stylesheet">

</head>
<style>
    /* 배경용 CSS입니다. 망가지면 전체 CSS가 꼬입니다. */

    body {
        margin: 15px;
        height: 100vh;
        background: radial-gradient(firebrick, black);
        overflow-y: auto;
        -webkit-animation: fadeIn 1 1s ease-out;
        -moz-animation: fadeIn 1 1s ease-out;
        -o-animation: fadeIn 1 1s ease-out;
        animation: fadeIn 1 1s ease-out;
    }
    body::-webkit-scrollbar{
        width: 5px;
    }
    body::-webkit-scrollbar-track{
        background-color: transparent;
    }
    body::-webkit-scrollbar-thumb{
        background-color: orangered;
    }

    .light {
        position: absolute;
        width: 0px;
        opacity: .75;
        background-color: white;
        box-shadow: #e9f1f1 0px 0px 20px 2px;
        opacity: 0;
        top: 100vh;
        bottom: 0px;
        left: 0px;
        right: 0px;
        margin: auto;

    }
    .x1 {
        -webkit-animation: floatUp 4s infinite linear;
        -moz-animation: floatUp 4s infinite linear;
        -o-animation: floatUp 4s infinite linear;
        animation: floatUp 4s infinite linear;
        -webkit-transform: scale(1.0);
        -moz-transform: scale(1.0);
        -o-transform: scale(1.0);
        transform: scale(1.0);
    }
    .x2 {
        -webkit-animation: floatUp 7s infinite linear;
        -moz-animation: floatUp 7s infinite linear;
        -o-animation: floatUp 7s infinite linear;
        animation: floatUp 7s infinite linear;
        -webkit-transform: scale(1.6);
        -moz-transform: scale(1.6);
        -o-transform: scale(1.6);
        transform: scale(1.6);
        left: 15%;
    }
    .x3 {
        -webkit-animation: floatUp 2.5s infinite linear;
        -moz-animation: floatUp 2.5s infinite linear;
        -o-animation: floatUp 2.5s infinite linear;
        animation: floatUp 2.5s infinite linear;
        -webkit-transform: scale(.5);
        -moz-transform: scale(.5);
        -o-transform: scale(.5);
        transform: scale(.5);
        left: -15%;
    }
    .x4 {
        -webkit-animation: floatUp 4.5s infinite linear;
        -moz-animation: floatUp 4.5s infinite linear;
        -o-animation: floatUp 4.5s infinite linear;
        animation: floatUp 4.5s infinite linear;
        -webkit-transform: scale(1.2);
        -moz-transform: scale(1.2);
        -o-transform: scale(1.2);
        transform: scale(1.2);
        left: -34%;
    }
    .x5 {
        -webkit-animation: floatUp 8s infinite linear;
        -moz-animation: floatUp 8s infinite linear;
        -o-animation: floatUp 8s infinite linear;
        animation: floatUp 8s infinite linear;
        -webkit-transform: scale(2.2);
        -moz-transform: scale(2.2);
        -o-transform: scale(2.2);
        transform: scale(2.2);
        left: -57%;
    }
    .x6 {
        -webkit-animation: floatUp 3s infinite linear;
        -moz-animation: floatUp 3s infinite linear;
        -o-animation: floatUp 3s infinite linear;
        animation: floatUp 3s infinite linear;
        -webkit-transform: scale(.8);
        -moz-transform: scale(.8);
        -o-transform: scale(.8);
        transform: scale(.8);
        left: -81%;
    }
    .x7 {
        -webkit-animation: floatUp 5.3s infinite linear;
        -moz-animation: floatUp 5.3s infinite linear;
        -o-animation: floatUp 5.3s infinite linear;
        animation: floatUp 5.3s infinite linear;
        -webkit-transform: scale(3.2);
        -moz-transform: scale(3.2);
        -o-transform: scale(3.2);
        transform: scale(3.2);
        left: 37%;
    }
    .x8 {
        -webkit-animation: floatUp 4.7s infinite linear;
        -moz-animation: floatUp 4.7s infinite linear;
        -o-animation: floatUp 4.7s infinite linear;
        animation: floatUp 4.7s infinite linear;
        -webkit-transform: scale(1.7);
        -moz-transform: scale(1.7);
        -o-transform: scale(1.7);
        transform: scale(1.7);
        left: 62%;
    }
    .x9 {
        -webkit-animation: floatUp 4.1s infinite linear;
        -moz-animation: floatUp 4.1s infinite linear;
        -o-animation: floatUp 4.1s infinite linear;
        animation: floatUp 4.1s infinite linear;
        -webkit-transform: scale(0.9);
        -moz-transform: scale(0.9);
        -o-transform: scale(0.9);
        transform: scale(0.9);
        left: 85%;
    }

    @-webkit-keyframes floatUp {
        0% {
            top: 100vh;
            opacity: 0;
        }
        25% {
            opacity: 1;
        }
        50% {
            top: 0vh;
            opacity: .8;
        }
        75% {
            opacity: 1;
        }
        100% {
            top: -100vh;
            opacity: 0;
        }
    }
    @-moz-keyframes floatUp {
        0% {
            top: 100vh;
            opacity: 0;
        }
        25% {
            opacity: 1;
        }
        50% {
            top: 0vh;
            opacity: .8;
        }
        75% {
            opacity: 1;
        }
        100% {
            top: -100vh;
            opacity: 0;
        }
    }
    @-o-keyframes floatUp {
        0% {
            top: 100vh;
            opacity: 0;
        }
        25% {
            opacity: 1;
        }
        50% {
            top: 0vh;
            opacity: .8;
        }
        75% {
            opacity: 1;
        }
        100% {
            top: -100vh;
            opacity: 0;
        }
    }
    @keyframes floatUp {
        0% {
            top: 100vh;
            opacity: 0;
        }
        25% {
            opacity: 1;
        }
        50% {
            top: 0vh;
            opacity: .8;
        }
        75% {
            opacity: 1;
        }
        100% {
            top: -100vh;
            opacity: 0;
        }
    }
    @-webkit-keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
    @-moz-keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
    @-o-keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
    @-webkit-keyframes fadeOut {
        0% {
            opacity: 0;
        }
        30% {
            opacity: 1;
        }
        80% {
            opacity: .9;
        }
        100% {
            opacity: 0;
        }
    }
    @-moz-keyframes fadeOut {
        0% {
            opacity: 0;
        }
        30% {
            opacity: 1;
        }
        80% {
            opacity: .9;
        }
        100% {
            opacity: 0;
        }
    }
    @-o-keyframes fadeOut {
        0% {
            opacity: 0;
        }
        30% {
            opacity: 1;
        }
        80% {
            opacity: .9;
        }
        100% {
            opacity: 0;
        }
    }
    @keyframes fadeOut {
        0% {
            opacity: 0;
        }
        30% {
            opacity: 1;
        }
        80% {
            opacity: .9;
        }
        100% {
            opacity: 0;
        }
    }
    @-webkit-keyframes finalFade {
        0% {
            opacity: 0;
        }
        30% {
            opacity: 1;
        }
        80% {
            opacity: .9;
        }
        100% {
            opacity: 1;
        }
    }
    @-moz-keyframes finalFade {
        0% {
            opacity: 0;
        }
        30% {
            opacity: 1;
        }
        80% {
            opacity: .9;
        }
        100% {
            opacity: 1;
        }
    }
    @-o-keyframes finalFade {
        0% {
            opacity: 0;
        }
        30% {
            opacity: 1;
        }
        80% {
            opacity: .9;
        }
        100% {
            opacity: 1;
        }
    }
    @keyframes finalFade {
        0% {
            opacity: 0;
        }
        30% {
            opacity: 1;
        }
        80% {
            opacity: .9;
        }
        100% {
            opacity: 1;
        }
    }



    /*머리쪽 CSS 입니다. 로그인 및 기능용 버튼들이 모여 있습니다.*/
   .header{
       width: auto;
       height: 150px;
       /*border: 1px solid white;*/
       display: flex;
       flex-direction: row;
       flex-wrap: nowrap;
       justify-content: space-between;
       vertical-align: center;
   }
   .logo{
       width: 200px;
       height: 50px;
       /*border: 1px solid white;*/
       margin: 35px;
   }
   .button_box{
       width: 350px;
       height: 50px;
       margin: 35px;
       /*border: 1px solid white;*/
       display: flex;
       flex-direction: row;
       flex-wrap: nowrap;
       justify-content: space-between;
       padding: 7px;
   }
   .buttonTop{
       width: 200px;
       height: 45px;
       border: none;
       color: ghostwhite;
       font-size: 15px;
       background-color: transparent;
       text-shadow: 3px 3px 4px black;
       font-family: 'Gothic A1', sans-serif;
   }
   .body{
       width: auto;
       height: auto;
       /*border: 1px solid white;*/
   }
   .bodyInwrap{
       width: auto;
       height: auto;
       /*border: 1px solid white;*/
       padding: 25px;
       display: flex;
       flex-direction: column;
       flex-wrap: nowrap;
       justify-content: center;
   }

   /*검색 영역의 CSS 입니다.*/
   .searchWrap{
       text-align: center;
       margin-top: 60px;
   }

   /*메인 영역 CSS 입니다.*/
   .mainWrap{
       width: auto;
       height: auto;
       margin-top: 80px;
       /*border: 1px solid white;*/
       display: flex;
       flex-direction: column;
       flex-wrap: nowrap;
       justify-content: center;
       align-items: center;
   }
   .mainList{
       width: 1300px;
       height: auto;
       /*padding: 10px;*/
       /*border: 1px solid white;*/
       display: flex;
       flex-direction: column;
       flex-wrap: nowrap;
       justify-content: center;
       align-items: center;

   }
  .Write{
       width: auto;
       height: 200px;
       /*border: 1px solid white;*/
       display: block;
       flex-direction: column;
       flex-wrap: nowrap;
       justify-content: center;
       align-items: flex-start;
      margin-bottom: 70px;
      text-align: center;
   }
  .comsyInput{
       display: flex;
       flex-direction: row;
       flex-wrap: nowrap;
       justify-content: center;
  }
   .Titlearea{
        margin-bottom: 40px;
   }
   .inputTitle{
       width: 600px;
       padding: 10px;
       font-size: 30px;
       font-weight: bold;
       background-color: transparent;
       color: ghostwhite;
       border: none;
       outline: none;
   }
   .inputTitle::placeholder{
        color: ghostwhite;
    }

    .Urlarea {
        margin-bottom: 35px;
    }

    .inputURL {
        width: 600px;
        height: 35px;
        padding: 10px;
        font-size: 14px;
        background-color: transparent;
        color: ghostwhite;
        border: none;
        outline: none;
        margin-bottom: -20px;
    }

    .inputURL::placeholder{
        color: ghostwhite;
    }

    .Synoparea {
        margin-bottom: 30px;
        margin-left: 35px;
        text-align: center;
    }

    .inputSynopsis {
        width: 300px;
        height: 130px;
        padding: 25px;
        font-size: 15px;
        background-color: transparent;
        color: ghostwhite;
        border: 1px solid whitesmoke;
        border-top-color: transparent;
        border-bottom-color: transparent;
        outline: none;
        /*margin-bottom: -20px;*/
        overflow: auto;
        resize: none;
    }
    .inputSynopsis::-webkit-scrollbar{
        width: 5px;
    }
    .inputSynopsis::-webkit-scrollbar-track{
        background-color: transparent;
    }
    .inputSynopsis::-webkit-scrollbar-thumb{
        background-color: transparent;
    }
    .inputSynopsis::placeholder{
        font-weight: bold;
        text-align: center;
        font-size: 15px;
        position: absolute;
        color:ghostwhite;
    }


    .Commarea {
        margin-bottom: 30px;
        margin-right: 35px;
    }

    .inputComment {
        width: 300px;
        height: 130px;
        padding: 25px;
        font-size: 15px;
        background-color: transparent;
        color: ghostwhite;
        border: 1px solid whitesmoke;
        border-top-color: transparent;
        border-bottom-color: transparent;
        outline: none;
        /*margin-bottom: -20px;*/
        overflow: auto;
        resize: none;
    }
    .inputComment::-webkit-scrollbar{
        width: 5px;
    }
    .inputComment::-webkit-scrollbar-track{
        background-color: transparent;
    }
    .inputComment::-webkit-scrollbar-thumb{
        background-color: transparent;
    }

    .Stararea {
        margin-bottom: 15px;
    }

    .SelectStar {
        width: 550px;
        height: 35px;
        padding: 10px;
        font-size: 14px;
        background-color: transparent;
        color: grey;
        border: none;
        outline: none;
        margin-bottom: -20px;
    }
    .SelectStar::placeholder{
        color: ghostwhite;
    }

    .button_write{
        margin-top: 50px;
        border: none;
        outline: none;
        width: 200px;
        height: 40px;
        background-color: transparent;
        color: ghostwhite;
        font-size: 25px;
        margin-right: 50px;
        text-shadow: 2px 2px 2px black;
    }

    .button_back{
        margin-top: 50px;
        border: none;
        outline: none;
        width: 200px;
        height: 40px;
        background-color: transparent;
        color: ghostwhite;
        font-size: 25px;
        margin-right: 50px;
        text-shadow: 2px 2px 2px black;
    }


    </style>

<script>

    $(document).ready(function () {
            $.ajax({
                type: "GET",
                url: "/api/login/user_check",
                success: function (response) {
                    if (response['result'] == 'success') {
                        userinfo = response['userinfo']
                        console.log(userinfo)
                        const btnElement = document.getElementById('buttonMypage');
                        btnElement.innerText = userinfo['nick'];
                    } else {
                        // 로그인이 안되면 에러메시지를 띄웁니다.
                        alert(response['msg'])
                    }
                }
            })
    });



    function gomain() {
        window.location.href = "/"
    }

    function mypage() {
        window.location.href = "/mypage"
    }

    function logout() {
        $.removeCookie('mytoken');
        alert('로그아웃!')
        window.location.href = '/'
    }


       function check() {
            if ($("#title").val().length == "") {

                alert("제목을 입력해 주세요"); $("#title").focus(); return false;

            } else if ($("#image_url").val()== "") {

                alert("URL을 입력해 주세요"); $("#image_url").focus(); return false;

            } else if ($("#star option:selected").val() == "작품의 평점을 남겨 주세요") {

                alert("평점을 선택해 주세요"); $("#star").css("color", "red", "font" , "bold"); return false;

            } else if ($("#synopsis").val().length == "") {

                alert("줄거리를 입력해 주세요"); $("#synopsis").focus(); return false;

            } else if ($("#comment").val().length == "") {

                alert("감상평을 입력해 주세요"); $("#comment").focus() ; return false;
            } else {
                posting(); $("#title").focus();
                window.location.href = '/'
                return true;
            }
        }

    function posting() {
        let userid = userinfo['id']
        let usernick = userinfo['nick']
        let title = $('#title').val()
        let star = $('#star').val()
        let synopsis = $('#synopsis').val()
        let comment = $('#comment').val()
        let image = $('#image_url').val()

        $.ajax({
            type: 'POST',
            url: '/drama',
            data: {
                userid_give : userid,
                usernick_give : usernick,
                title_give: title,
                star_give: star,
                comment_give: comment,
                synopsis_give: synopsis,
                image_give: image
            },
            success: function (response) {
                alert(response['msg'])
                window.location.reload()
            }
        });
    }
    </script>

<body>
<div class="head">
    <div class='light x1'></div>
    <div class='light x2'></div>
    <div class='light x3'></div>
    <div class='light x4'></div>
    <div class='light x5'></div>
    <div class='light x6'></div>
    <div class='light x7'></div>
    <div class='light x8'></div>
    <div class='light x9'></div>
</div>
<div class="header">
    <div class="logo">
        <img onclick="gomain()" src="/static/naeflix.png" style="width: 100%">
    </div>
    <div class="button_box">
        <button id="buttonMypage" class="buttonTop" onclick="mypage()">내페이지</button>
        <button id="buttonLogout" class="buttonTop" onclick="logout()">로그아웃</button>
    </div>
</div>
<div class="body">
    <div class="bodyInwrap">
        <div class="mainWrap">
            <div class="mainList" id="main_List">
                <div class="Write">
                    <div class="Titlearea">
                        <form>
                        <input id="title" class="inputTitle" placeholder="제목을 입력해 주세요" type="text" required>
                        <hr>
                        </form>
                    </div>
                    <div class="Urlarea">
                        <form>
                        <input id="image_url" class="inputURL" placeholder="썸네일 이미지의 url을 입력해 주세요" type="text" required>
                        <hr>
                        </form>
                    </div>
                                        <div class="Stararea">
                        <select id="star" class="SelectStar">
                            <option id="n" selected="">작품의 평점을 남겨 주세요</option>
                            <option value="1">⭐</option>
                            <option value="2">⭐⭐</option>
                            <option value="3">⭐⭐⭐</option>
                            <option value="4">⭐⭐⭐⭐</option>
                            <option value="5">⭐⭐⭐⭐⭐</option>
                        </select>
                    </div>
                </div>
                <div class="comsyInput">
                    <div class="Commarea">
                        <p style="color: white; text-align: center; margin-bottom: -20px;">작품의 감상평을 남겨 주세요</p>
                        <textarea id="comment" class="inputComment" type="text" required></textarea>
                    </div>
                    <div class="Synoparea">
                        <p style="color: white; text-align: center; margin-bottom: -20px;">작품의 줄거리를 입력해 주세요</p>
                        <textarea id="synopsis" class="inputSynopsis"></textarea>
                    </div>
                </div>
                <div>
                    <button onclick="check()" class="button_write">작성 하기</button>
                    <button onclick="gomain()" class="button_back">뒤로 가기</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="footer">
</div>
</body>
</html>
